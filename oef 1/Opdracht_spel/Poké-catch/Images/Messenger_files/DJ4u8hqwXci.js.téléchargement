if (self.CavalryLogger) { CavalryLogger.start_js(["gV6Wr"]); }

__d('MercuryThirdPartyMediaReactShape',['React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=h.shape({aspectRatio:h.number,height:h.number.isRequired,lockHeight:h.bool.isRequired,width:h.number.isRequired}),j=h.shape({chatImageDimensions:i.isRequired,chatMediaDimensions:i.isRequired,chatTextClasses:h.string,mediaSrc:h.string.isRequired,messengerImageDimensions:i.isRequired,messengerMediaDimensions:i.isRequired,messengerTextClasses:h.string,showMediaWithText:h.bool.isRequired});f.exports=j;}),null);
__d('MercuryThirdPartyMediaAttachmentContent.react',['cx','ix','CenteredContainer.react','ControlledRefererIFrame.react','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','Image.react','ImageBlock.react','Link.react','MercuryFallbackShareAttachmentTextBlock.react','MercuryShareAttachmentRenderLocations','MercuryThirdPartyMediaReactShape','React','ReactDOM','ResponsiveBlock.react','URI','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m={IMAGE:'image',MEDIA:'media'};j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$MercuryThirdPartyMediaAttachmentContent1=function(){this.setState({imageDimensions:this.$MercuryThirdPartyMediaAttachmentContent5(m.IMAGE),mediaDimensions:this.$MercuryThirdPartyMediaAttachmentContent5(m.MEDIA)});}.bind(this),this.$MercuryThirdPartyMediaAttachmentContent4=function(){if(!this.props.attachment.media||!this.props.attachment.media.image)return "_3xn3 _5swn";var u=this.$MercuryThirdPartyMediaAttachmentContent5(this.state.showMedia?m.MEDIA:m.IMAGE),v=u.height,w=u.width,x=v>w;return "_3xn3"+(o(v,w)&&!x?' '+"_3xn5":'')+(x?' '+"_3xn6":'')+(w>=v?' '+"_3xn7":'');}.bind(this),this.$MercuryThirdPartyMediaAttachmentContent6=function(u){var v=this.props.media;if(this.$MercuryThirdPartyMediaAttachmentContent7()){return u===m.IMAGE?v.chatImageDimensions:v.chatMediaDimensions;}else return u===m.IMAGE?v.messengerImageDimensions:v.messengerMediaDimensions;}.bind(this),this.$MercuryThirdPartyMediaAttachmentContent5=function(u){var v=this.$MercuryThirdPartyMediaAttachmentContent6(u),w=c('ReactDOM').findDOMNode(this.refs.wrapper);if(w){var x=v.aspectRatio,y=w.offsetWidth;if(x!=null){return {aspectRatio:x,height:y*x,lockHeight:false,width:y};}else if(v.lockHeight){return {aspectRatio:null,height:v.height,lockHeight:true,width:y};}else return v;}else return v;}.bind(this),this.$MercuryThirdPartyMediaAttachmentContent8=function(u){u.preventDefault();this.setState({showMedia:true,iframeWidth:c('ReactDOM').findDOMNode(this.refs.wrapper).offsetWidth});}.bind(this),this.$MercuryThirdPartyMediaAttachmentContent3=function(){var u=this.state.imageDimensions,v={height:u.height,width:u.width};return c('React').createElement(c('FBOverlayContainer.react'),{className:(this.state.showMedia?"hidden_elem":'')+(' '+"clearfix"),style:v},c('React').createElement(c('FBOverlayBase.react'),null,c('React').createElement(c('Image.react'),{style:v,src:this.props.attachment.media.image})),c('React').createElement(c('FBOverlayElement.react'),null,c('React').createElement(c('CenteredContainer.react'),{vertical:true},c('React').createElement(c('Image.react'),{className:"_4crc",onClick:this.$MercuryThirdPartyMediaAttachmentContent8,src:i("27983")}))));}.bind(this),this.$MercuryThirdPartyMediaAttachmentContent2=function(){if(!this.state.showMedia)return c('React').createElement('div',null);var u=this.state.mediaDimensions,v=new (c('URI'))(this.props.media.mediaSrc);v.addQueryData({autoplay:true});return c('React').createElement(c('ControlledRefererIFrame.react'),{allowTransparency:true,frameBorder:0,height:u.height,src:v.toString(),width:u.width,allowFullScreen:true});}.bind(this),this.$MercuryThirdPartyMediaAttachmentContent7=function(){return this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT;}.bind(this),this.state={showMedia:false,imageDimensions:this.$MercuryThirdPartyMediaAttachmentContent5(m.IMAGE),mediaDimensions:this.$MercuryThirdPartyMediaAttachmentContent5(m.MEDIA)},q;}n.prototype.render=function(){var p=this.props.attachment,q=this.props.location,r=this.props.media,s=(c('MercuryShareAttachmentRenderLocations').CHAT===q?"_49or":'')+(c('MercuryShareAttachmentRenderLocations').MESSENGER===q?' '+"_tih":'')+(!(p&&p.media.image)?' '+"_49ou":'');if(q===c('MercuryShareAttachmentRenderLocations').CHAT){return c('React').createElement(c('ResponsiveBlock.react'),{onResize:this.$MercuryThirdPartyMediaAttachmentContent1,ref:'wrapper',className:r.chatTextClasses},this.$MercuryThirdPartyMediaAttachmentContent2(),c('React').createElement('div',{className:c('joinClasses')(s,this.state.showMedia&&!this.props.media.showMediaWithText?"hidden_elem":''),spacing:'medium'},this.$MercuryThirdPartyMediaAttachmentContent3(),c('React').createElement('div',{className:"_4cra"},c('React').createElement(c('MercuryFallbackShareAttachmentTextBlock.react'),{attachment:p,location:q}))));}else if(q===c('MercuryShareAttachmentRenderLocations').MESSENGER)return c('React').createElement(c('ResponsiveBlock.react'),{onResize:this.$MercuryThirdPartyMediaAttachmentContent1,ref:'wrapper'},c('React').createElement('div',{className:c('joinClasses')(this.props.className,this.$MercuryThirdPartyMediaAttachmentContent4())},this.$MercuryThirdPartyMediaAttachmentContent2(),c('React').createElement('div',{className:this.state.showMedia&&!this.props.media.showMediaWithText?"hidden_elem":''},this.$MercuryThirdPartyMediaAttachmentContent3(),c('React').createElement(c('Link.react'),{className:c('joinClasses')(r.messengerTextClasses,"_5rw4 _vjv"),href:this.props.media.mediaSrc,target:'_blank'},c('React').createElement(c('MercuryFallbackShareAttachmentTextBlock.react'),{attachment:p,location:q})))));};n.propTypes={attachment:l.object.isRequired,location:l.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()).isRequired,media:c('MercuryThirdPartyMediaReactShape').isRequired};function o(p,q){return p<=300&&q<=300;}f.exports=n;}),null);