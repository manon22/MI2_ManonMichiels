if (self.CavalryLogger) { CavalryLogger.start_js(["xOT07"]); }

__d('MercuryYoutubeLinkParser',['MercuryConfig','MercuryShareAttachmentRenderLocations','URI'],(function a(b,c,d,e,f,g){'use strict';var h='www.youtube.com',i='m.youtube.com',j='youtu.be',k='https://www.youtube.com/',l='/watch',m={isValidYoutubeLink:function n(o,p){var q=this._getYoutubeURI(p),r=q.getDomain();return o===c('MercuryShareAttachmentRenderLocations').MESSENGER&&(r===h||r===i||r===j)&&this.getVideoID(q)!==null;},_getYoutubeURI:function n(o){var p=new (c('URI'))(o);if(this.isShareLink(p))return p;var q=p.getQueryData().u;return q?new (c('URI'))(q):p;},getVideoID:function n(o){var p=o.getPath();if(this.isShareLink(o))return p;if(p===l)return o.getQueryData().v;return null;},getVideoEmbedURI:function n(o,p){if(this.isValidYoutubeLink(o,p)){var q=this._getYoutubeURI(p),r=q.getQueryData().t,s=new (c('URI'))(k).setPath('/embed/'+this.getVideoID(q));if(r!=null){var t=this.shareLinkStartTimeToEmbedStartTime(r);if(t!=null)s.setQueryData({start:t});}return s.toString();}else return '';},isShareLink:function n(o){return o.getDomain()===j;},shareLinkStartTimeToEmbedStartTime:function n(o){var p=o.match(/((\d+)h)?((\d+)m)?((\d+)s)?/);if(p==null||p[0]==='')return null;var q=p[2],r=p[4],s=p[6];return Number(q||0)*3600+Number(r||0)*60+Number(s||0)+'';}};f.exports=m;}),null);
__d('MercuryVideoShareYoutubeAttachment.react',['cx','BootloadOnRender.react','JSResource','LazyComponent.react','MercuryFallbackShareAttachment.react','MercuryShareAttachmentRenderLocations','MercuryYoutubeLinkParser','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MercuryVideoShareYoutubeAttachment1=function(){var r={aspectRatio:9/16,height:0,lockHeight:false,width:0};return {chatImageDimensions:r,chatMediaDimensions:r,chatTextClasses:"_3rnp",mediaSrc:c('MercuryYoutubeLinkParser').getVideoEmbedURI(this.props.location,this.props.attachment.uri),messengerImageDimensions:r,messengerMediaDimensions:r,messengerTextClasses:"_3rnq",showMediaWithText:true};}.bind(this),n;}l.prototype.render=function(){if(c('MercuryYoutubeLinkParser').isValidYoutubeLink(this.props.location,this.props.attachment.uri))return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MercuryThirdPartyMediaAttachmentContent.react').__setRef('MercuryVideoShareYoutubeAttachment.react'),component:c('React').createElement(c('LazyComponent.react'),{attachment:this.props.attachment,location:this.props.location,media:this.$MercuryVideoShareYoutubeAttachment1()}),placeholder:c('React').createElement('div',null)});return c('React').createElement(c('MercuryFallbackShareAttachment.react'),this.props);};l.propTypes={attachment:k.object.isRequired,location:k.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()).isRequired,maxWidth:k.number};f.exports=l;}),null);